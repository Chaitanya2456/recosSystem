(this["webpackJsonpcounter-app"]=this["webpackJsonpcounter-app"]||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports=a(22)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(5),i=a.n(c),l=(a(15),a(6)),o=a(7),s=a(2),u=a(9),m=a(8),d=a(1),v=a(3),h=a.n(v),g=r.a.createContext(),p=function(){return r.a.createElement("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 352 512"},r.a.createElement("path",{fill:"currentColor",d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"}))},f=(a(16),function(e){var t=e.movie,a=e.onClose;return r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"content__background"},r.a.createElement("div",{className:"content__background__shadow"}),r.a.createElement("div",{className:"content__background__image",style:{"background-image":"url(".concat(t.imageBg,")")}})),r.a.createElement("div",{className:"content__area"},r.a.createElement("div",{className:"content__area__container"},r.a.createElement("div",{className:"content__title"},t.title),r.a.createElement("div",{className:"content__description"},"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque et euismod ligula. Morbi mattis pretium eros, ut mollis leo tempus eget. Sed in dui ac ipsum feugiat ultricies. Phasellus vestibulum enim quis quam congue, non fringilla orci placerat. Praesent sollicitudin")),r.a.createElement("button",{className:"content__close",onClick:a},r.a.createElement(p,null))))}),_=function(){return r.a.createElement("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},r.a.createElement("path",{fill:"currentColor",d:"M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z"}))},b=(a(17),function(e){var t=e.onClick,a=e.type;return r.a.createElement("button",{className:"slide-button slide-button--".concat(a),onClick:t},r.a.createElement("span",null,r.a.createElement(_,null)))}),E=(a(18),function(e){var t=e.children;return r.a.createElement("div",{className:"slider-wrapper"},t)}),w=function(e,t){var a=Object(n.useRef)(null),r=Object(n.useState)(0),c=Object(d.a)(r,2),i=c[0],l=c[1],o=Object(n.useState)(0),s=Object(d.a)(o,2),u=s[0],m=s[1],v=Object(n.useState)(0),h=Object(d.a)(v,2),g=h[0],p=h[1],f=Object(n.useState)(0),_=Object(d.a)(f,2),b=_[0],E=_[1];Object(n.useEffect)((function(){var t=a.current.clientWidth-110;l(t),p(Math.floor(t/e))}),[a.current]);return{handlePrev:function(){E(b-g),m(u+i)},handleNext:function(){E(b+g),m(u-i)},slideProps:{style:{transform:"translate3d(".concat(u,"px, 0, 0)")}},containerRef:a,hasPrev:u<0,hasNext:b+g<t}},k=function(){var e=Object(n.useRef)(null),t=Object(n.useState)(0),a=Object(d.a)(t,2),r=a[0],c=a[1];return Object(n.useEffect)((function(){c(e.current.clientWidth)}),[e.current]),{width:r,elementRef:e}},j=(a(19),function(e){var t=e.children,a=e.activeSlide,c=Object(n.useState)(a),i=Object(d.a)(c,2),l=i[0],o=i[1],s=k(),u=s.width,m=s.elementRef,v=w(u,r.a.Children.count(t)),p=v.handlePrev,_=v.handleNext,j=v.slideProps,y=v.containerRef,O=v.hasNext,N=v.hasPrev,S=function(){o(null)},D={onSelectSlide:function(e){o(e)},onCloseSlide:S,elementRef:m,currentSlide:l};return r.a.createElement(g.Provider,{value:D},r.a.createElement(E,null,r.a.createElement("div",{className:h()("slider",{"slider--open":null!=l})},r.a.createElement("div",Object.assign({ref:y,className:"slider__container"},j),t)),N&&r.a.createElement(b,{onClick:p,type:"prev"}),O&&r.a.createElement(b,{onClick:_,type:"next"})),l&&r.a.createElement(f,{movie:l,onClose:S}))}),y=(a(20),function(e){console.log(e),chrome.runtime.sendMessage({msg:"go to new tab",type:e.type,data:e.data})}),O=function(e){var t=e.movie;return r.a.createElement(g.Consumer,null,(function(e){e.onSelectSlide;var a=e.currentSlide,n=e.elementRef,c=a&&a.id===t.id;return r.a.createElement("div",{onClick:function(){return y(t)},ref:n,className:h()("item",{"item--open":c})},r.a.createElement("img",{src:t.image,alt:""}))}))};j.Item=O;var N=j,S=(a(21),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).renderWatching=function(){return 0!==n.state.watched.length?r.a.createElement(N,null,n.state.watched.map((function(e){return r.a.createElement(N.Item,{movie:e,key:e.id},"item1")}))):null},n.rendertvs=function(){return 0!==n.state.tvs.length?r.a.createElement(N,null,n.state.tvs.map((function(e){return r.a.createElement(N.Item,{movie:e,key:e.id},"item1")}))):null},n.rendermovies=function(){return 0!==n.state.movies.length?r.a.createElement(N,null,n.state.movies.map((function(e){return r.a.createElement(N.Item,{movie:e,key:e.id},"item1")}))):null},n.getMoviesData=function(){var e=n.state.movies;chrome.storage.local.get("stored_movie_recos",function(t){for(var a=t.stored_movie_recos,n=0;n<a.length;n++)console.log("checking "+this.state.isWebPage+" "+a[n].title_val.recoData.backdrop_path),e.push({image:"https://image.tmdb.org/t/p/w92"+a[n].title_val.recoData.poster_path,title:a[n].key_title,type:"reco Movie",id:a[n].title_val.recoData.id,data:a[n].title_val.recoData});this.setState({movies:e})}.bind(Object(s.a)(n)))},n.getTVData=function(){var e=n.state.tvs;chrome.storage.local.get("stored_tv_recos",function(t){for(var a=t.stored_tv_recos,n=0;n<a.length;n++)e.push({image:"https://image.tmdb.org/t/p/w92"+a[n].title_val.recoData.poster_path,title:a[n].key_title,type:"reco TV",id:a[n].title_val.recoData.id,data:a[n].title_val.recoData});this.setState({tvs:e})}.bind(Object(s.a)(n)))},n.getWatchedData=function(){var e=n.state.watched;chrome.storage.local.get("stored_titles",function(t){for(var a=t.stored_titles,n=0;n<a.length;n++)e.push({image:"https://image.tmdb.org/t/p/w92"+a[n].title_val.Data.poster_path,title:a[n].key_title,type:a[n].title_val.type,id:a[n].title_val.Data.id,data:a[n].title_val.Data});this.setState({watched:e})}.bind(Object(s.a)(n)))},n.state={movies:[],tvs:[],watched:[]},n}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement("h2",null,"Recently Watched"),this.renderWatching(),r.a.createElement("h2",null,"TV suggested for you"),this.rendertvs(),r.a.createElement("h2",null,"Movies suggested for you"),this.rendermovies())}},{key:"componentDidMount",value:function(){this.getMoviesData(),this.getTVData(),this.getWatchedData();var e=this.state.watched,t=this.state.movies,a=this.state.tvs;chrome.runtime.sendMessage({msg:"ack by new tab"},function(n){if(console.log("sent message from app.js"),n.new_tab){for(var r=0;r<t.length;r++)t[r].image="https://image.tmdb.org/t/p/w300"+t[r].data.backdrop_path;for(r=0;r<e.length;r++)e[r].image="https://image.tmdb.org/t/p/w300"+e[r].data.backdrop_path;for(r=0;r<a.length;r++)a[r].image="https://image.tmdb.org/t/p/w300"+a[r].data.backdrop_path;this.setState({watched:e,movies:t,tvs:a})}}.bind(this))}}]),a}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[10,1,2]]]);
//# sourceMappingURL=main.cc223a51.chunk.js.map