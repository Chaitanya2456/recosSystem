(this["webpackJsonpcounter-app"]=this["webpackJsonpcounter-app"]||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports=a(24)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),o=a.n(c),i=(a(15),a(3)),l=a(4),s=a(2),u=a(7),m=a(6),d=a(1),v=a(5),h=a.n(v),p=r.a.createContext(),f=function(){return r.a.createElement("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 352 512"},r.a.createElement("path",{fill:"currentColor",d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"}))},g=(a(16),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={imageID:""},e.updateVideo=function(){console.log(e.props.movie);var t=e.props.movie.type.includes("TV")?"tv":"movie",a=e.props.movie.id;console.log("Type: "+t+" ID "+a),fetch("https://api.themoviedb.org/3/"+t+"/"+a+"/videos?api_key=ddda0e20c54495aef2d2b5acce042abe&language=en-US").then((function(e){return e.text()})).then((function(t){var a=JSON.parse(t);console.log(a),e.setState({imageID:a.results[0].key})}))},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.movie,a=e.onClose;return r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"content__background"},r.a.createElement("div",{className:"content__background__shadow"}),r.a.createElement("iframe",{className:"content__background__image",src:"https://www.youtube.com/embed/"+this.state.imageID+"?autoplay=1&amp;controls=0&amp;loop=1&amp;showinfo=0&amp;modestbranding=1&amp;disablekb=1&amp;enablejsapi=1&amp;"})),r.a.createElement("div",{className:"content__area"},r.a.createElement("div",{className:"content__area__container"},r.a.createElement("div",{className:"content__title"},t.title),r.a.createElement("div",{className:"content__description"},t.data.overview)),r.a.createElement("button",{className:"content__close",onClick:a},r.a.createElement(f,null))))}},{key:"componentDidMount",value:function(){this.updateVideo()}},{key:"componentDidUpdate",value:function(){this.updateVideo()}}]),a}(r.a.Component)),b=function(){return r.a.createElement("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},r.a.createElement("path",{fill:"currentColor",d:"M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z"}))},_=(a(17),function(e){var t=e.onClick,a=e.type;return r.a.createElement("button",{className:"slide-button slide-button--".concat(a),onClick:t},r.a.createElement("span",null,r.a.createElement(b,null)))}),E=(a(18),function(e){var t=e.children;return r.a.createElement("div",{className:"slider-wrapper"},t)}),w=function(e,t){var a=Object(n.useRef)(null),r=Object(n.useState)(0),c=Object(d.a)(r,2),o=c[0],i=c[1],l=Object(n.useState)(0),s=Object(d.a)(l,2),u=s[0],m=s[1],v=Object(n.useState)(0),h=Object(d.a)(v,2),p=h[0],f=h[1],g=Object(n.useState)(0),b=Object(d.a)(g,2),_=b[0],E=b[1];Object(n.useEffect)((function(){var t=a.current.clientWidth-110;i(t),f(Math.floor(t/e))}),[a.current]);return{handlePrev:function(){E(_-p),m(u+o)},handleNext:function(){E(_+p),m(u-o)},slideProps:{style:{transform:"translate3d(".concat(u,"px, 0, 0)")}},containerRef:a,hasPrev:u<0,hasNext:_+p<t}},k=function(){var e=Object(n.useRef)(null),t=Object(n.useState)(0),a=Object(d.a)(t,2),r=a[0],c=a[1];return Object(n.useEffect)((function(){c(e.current.clientWidth)}),[e.current]),{width:r,elementRef:e}},y=(a(19),function(e){var t=e.children,a=e.activeSlide,c=Object(n.useState)(a),o=Object(d.a)(c,2),i=o[0],l=o[1],s=k(),u=s.width,m=s.elementRef,v=w(u,r.a.Children.count(t)),f=v.handlePrev,b=v.handleNext,y=v.slideProps,j=v.containerRef,O=v.hasNext,D=v.hasPrev,N=function(){l(null)},S={onSelectSlide:function(e){l(e)},onCloseSlide:N,elementRef:m,currentSlide:i};return r.a.createElement(p.Provider,{value:S},r.a.createElement(E,null,r.a.createElement("div",{className:h()("slider",{"slider--open":null!=i})},r.a.createElement("div",Object.assign({ref:j,className:"slider__container"},y),t)),D&&r.a.createElement(_,{onClick:f,type:"prev"}),O&&r.a.createElement(_,{onClick:b,type:"next"})),i&&r.a.createElement(g,{movie:i,onClose:N}))}),j=(a(20),function(e){var t=e.onClick;return r.a.createElement("button",{onClick:t,className:"show-details-button"},r.a.createElement("span",null,r.a.createElement(b,null)))}),O=(a(21),function(){return r.a.createElement("div",{className:"mark"})}),D=(a(22),function(e){console.log(e),e.detailsbtn||chrome.runtime.sendMessage({msg:"go to new tab",type:e.type,data:e.data})}),N=function(e){var t=e.movie;return r.a.createElement(p.Consumer,null,(function(e){var a=e.onSelectSlide,n=e.currentSlide,c=e.elementRef,o=n&&n.id===t.id;return r.a.createElement("div",{onClick:function(){return D(t)},ref:c,className:h()("item",{"item--open":o})},r.a.createElement("img",{src:t.detailsbtn?t.imageBg:t.image,alt:""}),t.detailsbtn&&r.a.createElement(j,{onClick:function(){return a(t)}}),o&&r.a.createElement(O,null))}))};y.Item=N;var S=y,C=(a(23),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).renderWatching=function(){return 0!==n.state.watched.length?r.a.createElement(S,null,n.state.watched.map((function(e){return r.a.createElement(S.Item,{movie:e,key:e.id},"item1")}))):null},n.rendertvs=function(){return 0!==n.state.tvs.length?r.a.createElement(S,null,n.state.tvs.map((function(e){return r.a.createElement(S.Item,{movie:e,key:e.id},"item1")}))):null},n.rendermovies=function(){return 0!==n.state.movies.length?r.a.createElement(S,null,n.state.movies.map((function(e){return r.a.createElement(S.Item,{movie:e,key:e.id},"item1")}))):null},n.getMoviesData=function(){var e=n.state.movies;chrome.storage.local.get("stored_movie_recos",function(t){for(var a=t.stored_movie_recos,n=0;n<a.length;n++)e.push({image:"https://image.tmdb.org/t/p/w92"+a[n].title_val.recoData.poster_path,title:a[n].key_title,type:"reco Movie",id:a[n].title_val.recoData.id,data:a[n].title_val.recoData,detailsbtn:!1,imageBg:"https://image.tmdb.org/t/p/w300"+a[n].title_val.recoData.backdrop_path});this.setState({movies:e})}.bind(Object(s.a)(n)))},n.getTVData=function(){var e=n.state.tvs;chrome.storage.local.get("stored_tv_recos",function(t){for(var a=t.stored_tv_recos,n=0;n<a.length;n++)e.push({image:"https://image.tmdb.org/t/p/w92"+a[n].title_val.recoData.poster_path,title:a[n].key_title,type:"reco TV",id:a[n].title_val.recoData.id,data:a[n].title_val.recoData,detailsbtn:!1,imageBg:"https://image.tmdb.org/t/p/w300"+a[n].title_val.recoData.backdrop_path});this.setState({tvs:e})}.bind(Object(s.a)(n)))},n.getWatchedData=function(){var e=n.state.watched;chrome.storage.local.get("stored_titles",function(t){for(var a=t.stored_titles,n=0;n<a.length;n++)e.push({image:"https://image.tmdb.org/t/p/w92"+a[n].title_val.Data.poster_path,title:a[n].key_title,type:a[n].title_val.type,id:a[n].title_val.Data.id,data:a[n].title_val.Data,detailsbtn:!1,imageBg:"https://image.tmdb.org/t/p/w300"+a[n].title_val.Data.backdrop_path});this.setState({watched:e})}.bind(Object(s.a)(n)))},n.state={movies:[],tvs:[],watched:[]},n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement("h2",null,"Recently Watched"),this.renderWatching(),r.a.createElement("h2",null,"TV suggested for you"),this.rendertvs(),r.a.createElement("h2",null,"Movies suggested for you"),this.rendermovies())}},{key:"componentDidMount",value:function(){this.getMoviesData(),this.getTVData(),this.getWatchedData(),chrome.runtime.sendMessage({msg:"ack by new tab"},function(e){if(console.log(e),e.webpage){for(var t=this.state.movies,a=0;a<t.length;a++)t[a].detailsbtn=!0;var n=this.state.tvs;for(a=0;a<n.length;a++)n[a].detailsbtn=!0;var r=this.state.watched;for(a=0;a<r.length;a++)r[a].detailsbtn=!0;this.setState({movies:t,tvs:n,watched:r})}}.bind(this))}}]),a}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[10,1,2]]]);
//# sourceMappingURL=main.ca1b01d1.chunk.js.map